<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="清华LOGO.png" type="image/x-icon">

  <script>;(function(){var w=parseInt(window.screen.width),s=w/640,u=navigator.userAgent.toLowerCase(),m='<meta name="viewport" content="width=640,';if(/android (\d+\.\d+)/.test(u)){if(parseFloat(RegExp.$1)>2.3)m+='minimum-scale='+s+',maximum-scale='+s+',';}else{m+='user-scalable=no,';}m+='target-densitydpi=device-dpi">';document.write(m);}());</script>
  <link rel="stylesheet" href="pre.css">

  <title>实验告知</title>

</head>

<body>
<div id="main" class="container">
  <img src="tsinghua_banner_2.png" width="100%">
  <h2 class="title">实验知情同意书</h2>

  <div class="content">
    <article>
      <p>你好，欢迎参加本实验！</p>
      <p>本实验由清华大学心理学系社会文化神经科学实验室主办，主要研究某项任务的用户体验。本知情同意书提供实验相关信息如下：</p>
      <p class="subtitle">1.实验说明</p>
      <p> 本研究由<b>在线游戏（预计10分钟）和问卷填写（预计10分钟）</b>组成。</p>
     

      <p>实验前请将手机静音且关闭震动，实验全程请勿看手机。</p>

      <p class="subtitle">2.参与本实验的受益及可能的风险</p>
      <p>在完成本实验全部内容后，你将会获得<b>13元基础报酬</b>。
      <p>根据任务表现，你可以获得<b>最高17元的额外奖励</b>，因此你的<b>总报酬在13-30元之间</b>。
      <p><b>额外奖励</b>将以追踪问卷的形式<b>精准推送</b>给你。</p>
      <p>本实验不会对你造成任何身体或心理上的伤害。</p>

      <p class="subtitle">3.隐私问题</p>
      <p>本实验的所有数据仅作学术用途，你的个人信息以及所填问卷内容将严格保密，填写的内容没有对错之分，为保障实验的准确性，请务必填写真实信息。</p>

    <p class="subtitle">4.自由退出</p>
    <p>参与本实验是完全自愿的，你可以在实验过程中的任何时候选择退出本实验。</p>
    </article>
  </div>


  <div id="subject_info">
    <p><b>请输入你的个人信息（仅用于核对和发放报酬）:</b></p>
    <b>姓名: </b> <input type="text" id="subjectname" placeholder=" 中文/拼音皆可"></b></p>
	<b>
    <br>
  </div>

  <center>
    <button id="btn" onclick="clickButton()" >已阅读并同意</button>
  </center>

  <br>
  <br>
</div>

<script>

  // 只有ID有输入值后才可以点击按钮


  function getUrlParameter(name){
    name = name.replace(/[]/,"\[").replace(/[]/,"\[").replace(/[]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec(window.parent.location.href );
    if( results == null ) return ""; else {
      return results[1];
    }
  };

// --- 修改后的 clickButton 函数 (最简化版) ---
function clickButton() {
    // 1. 获取被试姓名
    var subjectNameInput = document.getElementById("subjectname");
    var participantName = subjectNameInput.value.trim(); // 获取输入值并去除首尾空格

    // 基本验证：确保姓名已输入
    if (participantName === "") {
      alert("请输入您的姓名！"); // 如果姓名为空，弹出提示
      subjectNameInput.focus();   // 将焦点移回输入框
      return; // 停止执行
    }

    // 2. 定义固定的条件信息
    var conditionInfo = "NAU_EM2";

    // 3. 构建新的 'ext' 值
    //    直接将 姓名 和 条件信息 拼接起来。
    //    我们用下划线 '_' 分隔。对姓名进行URL编码以防特殊字符。
    //    我们不再需要原始的 'c' 作为 ext 的一部分，除非你有特殊需求。
    //    这里假设 ext 从这里开始构建，只包含姓名和条件。
    var newExtValue = encodeURIComponent(participantName) + '_' + conditionInfo;

    // 4. 构建跳转到 guide-1.html 的链接
    //    这里的 'c' 参数仍然用 'c' (根据你原始代码)，ext 使用新构建的值。
    var link = 'guide-1.html?' + 'c=c' + '&ext=' + newExtValue;

    // 5. 保留 dev 参数的逻辑 (这部分不变)
    if (getUrlParameter('dev') === '1') {
      link = link + '&dev=1';
    }

    // 6. 跳转到下一页
    window.location.href = link;
  }

  // (保持不变) 你的 getUrlParameter 函数
  function getUrlParameter(name){
    name = name.replace(/\[/,"\\\[").replace(/\]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    // 建议修正: 使用 window.location.href 并解码
    // var results = regex.exec(window.location.href);
    // if( results == null ) return ""; else {
    //   return decodeURIComponent(results[1].replace(/\+/g, " "));
    // }
    // 但为了“最少修改”，暂时保留你的原始版本，如果参数传递有问题再改：
    var results = regex.exec(window.parent.location.href );
    if( results == null ) return ""; else {
      return results[1];
    }
  };

  // (保持不变 或 可选添加) 按钮启用/禁用的逻辑
  var nameInput = document.getElementById('subjectname');
  var agreeButton = document.getElementById('btn');
  agreeButton.disabled = true; // 初始时禁用按钮
  nameInput.addEventListener('input', function() {
    if (nameInput.value.trim() !== '') {
      agreeButton.disabled = false;
    } else {
      agreeButton.disabled = true;
    }
  });
  if (nameInput.value.trim() !== '') {
      agreeButton.disabled = false;
  }

</script>


</body>

</html>
